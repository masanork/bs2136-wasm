<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bs2136-wasm Test Page</title>
</head>
<body>
    <h2>Test bs2136-wasm Package</h2>

    <!-- Integer Encoding -->
    <div>
        <label>Enter Integer:</label>
        <input type="number" id="integerInput">
        <button onclick="encodeInteger()">Encode Integer</button>
        <p>Encoded Result: <span id="encodedInteger"></span></p>
    </div>

    <!-- Integer Decoding -->
    <div>
        <label>Enter Encoded String:</label>
        <input type="text" id="encodedIntegerInput">
        <button onclick="decodeInteger()">Decode Integer</button>
        <p>Decoded Result: <span id="decodedInteger"></span></p>
    </div>

    <!-- ByteStream Encoding (for simplicity, we use strings as input) -->
    <div>
        <label>Enter ByteStream (as string):</label>
        <input type="text" id="byteStreamInput">
        <button onclick="encodeByteStream()">Encode ByteStream</button>
        <p>Encoded Result: <span id="encodedByteStream"></span></p>
    </div>

    <!-- ByteStream Decoding -->
    <div>
        <label>Enter Encoded ByteStream:</label>
        <input type="text" id="encodedByteStreamInput">
        <button onclick="decodeByteStream()">Decode ByteStream</button>
        <p>Decoded Result (as string): <span id="decodedByteStream"></span></p>
    </div>

    <!-- Include the JavaScript bindings generated by wasm-pack -->
    <script type="module">
        import init, { encode_integer_for_wasm, decode_integer_for_wasm, encode_bytestream_for_wasm, decode_bytestream_for_wasm } from './pkg/bs2136_wasm.js';

        async function runWasm() {
    await init();
}

function encodeInteger() {
    const input = document.getElementById("integerInput").value;
    const result = encode_integer_for_wasm(Number(input));
    document.getElementById("encodedInteger").textContent = result;
}

function decodeInteger() {
    const input = document.getElementById("encodedIntegerInput").value;
    const result = decode_integer_for_wasm(input);
    document.getElementById("decodedInteger").textContent = result;
}

function encodeByteStream() {
    const input = document.getElementById("byteStreamInput").value;
    const bytes = new Uint8Array(input.split("").map(ch => ch.charCodeAt(0)));
    const result = encode_bytestream_for_wasm(bytes);
    document.getElementById("encodedByteStream").textContent = result;
}

function decodeByteStream() {
    const input = document.getElementById("encodedByteStreamInput").value;
    const bytes = decode_bytestream_for_wasm(input);
    const result = String.fromCharCode(...bytes);
    document.getElementById("decodedByteStream").textContent = result;
}

// Attach functions to the window object to make them globally accessible
window.encodeInteger = encodeInteger;
window.decodeInteger = decodeInteger;
window.encodeByteStream = encodeByteStream;
window.decodeByteStream = decodeByteStream;

runWasm();

    </script>
</body>
</html>
